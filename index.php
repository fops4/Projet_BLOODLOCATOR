<? session_start(); ?>
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>BloodLocator</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Roboto:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
  <link href="assets/vendor/animate.css/animate.min.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->

  <link href="assets/css/style.css" rel="stylesheet">
  <link href="css/modif.css" rel="stylesheet">
</head>

<body>

  <?php
  include "hf/header.php";

  ?>
  <!-- ======= Hero Section ======= -->
  <section id="hero">
    <div id="heroCarousel" data-bs-interval="5000" class="carousel slide carousel-fade" data-bs-ride="carousel">

      <ol class="carousel-indicators" id="hero-carousel-indicators"></ol>

      <div class="carousel-inner" role="listbox">

        <!-- Slide 1 -->
        <div class="carousel-item active" style="background-image: url(assets/img/slide/14.jpg)">
          <div class="container">
            <h2><span>BLOODLOCATOR</span></h2>
            <p>Le don de sang est une action essentielle qui peut avoir un impact immédiat sur la vie d'autrui. En consacrant un court laps de temps au don de sang, chacun peut contribuer à sauver des vies. Les banques de sang sont cruciales pour fournir des ressources médicales lors d'urgences, d'interventions chirurgicales et pour traiter diverses conditions médicales.</p>
            <a href="inter.php" class="btn-get-started scrollto">Commencer</a>
          </div>
        </div>

        <!-- Slide 2 -->
        <div class="carousel-item" style="background-image: url(assets/img/slide/2.jpg)">
          <div class="container">
            <h2><span>BLOODLOCATOR</span></h2>
            <p>Le don de sang est une action essentielle qui peut avoir un impact immédiat sur la vie d'autrui. En consacrant un court laps de temps au don de sang, chacun peut contribuer à sauver des vies. Les banques de sang sont cruciales pour fournir des ressources médicales lors d'urgences, d'interventions chirurgicales et pour traiter diverses conditions médicales.</p>
            <a href="inter.php" class="btn-get-started scrollto">Commencer</a>
          </div>
        </div>

        <!-- Slide 3 -->
        <div class="carousel-item" style="background-image: url(assets/img/slide/13.jpeg)">
          <div class="container">
            <h2><span>BLOODLOCATOR</span></h2>
            <p>Le don de sang est une action essentielle qui peut avoir un impact immédiat sur la vie d'autrui. En consacrant un court laps de temps au don de sang, chacun peut contribuer à sauver des vies. Les banques de sang sont cruciales pour fournir des ressources médicales lors d'urgences, d'interventions chirurgicales et pour traiter diverses conditions médicales.</p>
            <a href="inter.php" class="btn-get-started scrollto">Commencer</a>
          </div>
        </div>

      </div>

      <a class="carousel-control-prev" href="#heroCarousel" role="button" data-bs-slide="prev">
        <span class="carousel-control-prev-icon bi bi-chevron-left" aria-hidden="true"></span>
      </a>

      <a class="carousel-control-next" href="#heroCarousel" role="button" data-bs-slide="next">
        <span class="carousel-control-next-icon bi bi-chevron-right" aria-hidden="true"></span>
      </a>

    </div>
  </section><!-- End Hero -->

  <main id="main">

    <!-- ======= Featured Services Section ======= -->
    <section id="featured-services" class="featured-services">
      <div class="container" data-aos="fade-up">

        <div class="row">
          <div class="col-md-6 col-lg-3 d-flex align-items-stretch mb-5 mb-lg-0">
            <div class="icon-box" data-aos="fade-up" data-aos-delay="100">
              <div class="icon"><i class="fas fa-heartbeat"></i></div>
              <h4 class="title"><a href="">Coeur</a></h4>
              <p class="description">Le cœur, organe vital, pompe le sang, assurant la distribution d'oxygène et de nutriments nécessaires à tout le corps. Son rôle central en fait un élément clé pour maintenir la vie et la santé.</p>
            </div>
          </div>

          <div class="col-md-6 col-lg-3 d-flex align-items-stretch mb-5 mb-lg-0">
            <div class="icon-box" data-aos="fade-up" data-aos-delay="200">
              <div class="icon"><i class="fas fa-pills"></i></div>
              <h4 class="title"><a href="">Medicaments</a></h4>
              <p class="description">Les médicaments, piliers de la médecine moderne, traitent, soulagent et améliorent la santé, offrant des solutions essentielles. Leur rôle majeur contribue à la prévention, favorisant ainsi le bien-être général.</p>
            </div>
          </div>

          <div class="col-md-6 col-lg-3 d-flex align-items-stretch mb-5 mb-lg-0">
            <div class="icon-box" data-aos="fade-up" data-aos-delay="300">
              <div class="icon"><i class="fas fa-thermometer"></i></div>
              <h4 class="title"><a href="">Thermometre</a></h4>
              <p class="description">Le thermomètre, instrument de mesure de la température, revêt diverses formes, allant du traditionnel thermomètre à mercure aux modèles électroniques et infrarouges modernes. </p>
            </div>
          </div>

          <div class="col-md-6 col-lg-3 d-flex align-items-stretch mb-5 mb-lg-0">
            <div class="icon-box" data-aos="fade-up" data-aos-delay="400">
              <div class="icon"><i class="fas fa-dna"></i></div>
              <h4 class="title"><a href="">ADN</a></h4>
              <p class="description">L'ADN, acronyme de l'acide désoxyribonucléique, constitue la molécule porteuse de l'information génétique dans les cellules. En formant une structure en double hélice, l'ADN guide le développement, la croissance et le fonctionnement des organismes vivants. </p>
            </div>
          </div>

        </div>

      </div>
    </section><!-- End Featured Services Section -->
    <?php
    if ((isset($_SESSION["utilisateur_connectee"]) && $_SESSION["utilisateur_connectee"] === true) || (isset($_SESSION["utilisateur_connecte"]) && $_SESSION["utilisateur_connecte"] === true)) {
      // Si l'utilisateur est connecté, afficher le menu déroulant avec Profil et Déconnexion
    ?>

    <?php
    } else {
    ?>
      <!-- ======= Cta Section ======= -->
      <section id="cta" class="cta">
        <div class="container" data-aos="zoom-in">

          <div class="text-center">
            <h3>Donner du Sang pour sauver des vies</h3>
            <p> Bien sûr ! Je suis tout à fait disposé à donner mon sang et à jouer mon rôle pour sauver des vies. En tant qu'être conscient, j'ai pleinement conscience de l'importance des dons de sang et de leur impact positif sur la santé des individus. Je suis prêt à franchir les portes d'un centre de don de sang avec une détermination solide, prêt à offrir ce précieux liquide vital qui pourrait faire la différence dans la vie de quelqu'un. Rejoignez-moi dans cette noble démarche et ensemble, nous pourrons faire une réelle contribution pour le bien-être de notre communauté.</p>
            <a class="cta-btn scrollto" href="form/connexion.php">Faire un Don des maintenant</a>
          </div>

        </div>
      </section><!-- End Cta Section -->
    <?php
    }
    ?>
    <!-- ======= Counts Section ======= -->
    <section id="counts" class="counts">
      <div class="container" data-aos="fade-up">

        <div class="row no-gutters">

          <div class="col-lg-3 col-md-6 d-md-flex align-items-md-stretch">



          <?php
include 'hopital/connexion.php'; // Inclure le fichier de connexion à la base de données

// Exécuter la requête SQL
$sql = "SELECT COUNT(*) AS total_donors FROM donneur";
$result = $connexion->query($sql);

// Vérifier si la requête a réussi
if ($result) {
    // Récupérer le résultat de la requête
    $row = $result->fetch_assoc();
    $totalDonors = $row['total_donors'];

    // Afficher le nombre de donneurs
    echo '<div class="count-box">';
    echo '<i class="fas fa-user-md"></i>';
    echo '<span data-purecounter-start="0" data-purecounter-end="'. $totalDonors .'" data-purecounter-duration="1" class="purecounter"></span>';
    echo '';
    echo '<p><strong>Donneur</strong>';
    echo '</div>';
    echo '</div>';
} else {
    // Gérer les erreurs de requête
    echo "Erreur lors de l'exécution de la requête : " . $connexion->error;
}

// Fermer la connexion à la base de données
$connexion->close();
?>



          <div class="col-lg-3 col-md-6 d-md-flex align-items-md-stretch">


          <?php
include 'hopital/connexion.php'; // Inclure le fichier de connexion à la base de données

// Exécuter la requête SQL
$sql = "SELECT COUNT(*) AS total_donors FROM hopital";
$result = $connexion->query($sql);

// Vérifier si la requête a réussi
if ($result) {
    // Récupérer le résultat de la requête
    $row = $result->fetch_assoc();
    $totalDonors = $row['total_donors'];

    // Afficher le nombre de donneurs
    echo '<div class="count-box">';
    echo '<i class="far fa-hospital"></i>';
    echo '<span data-purecounter-start="0" data-purecounter-end="'. $totalDonors .'" data-purecounter-duration="1" class="purecounter"></span>';
    echo '';
    echo '<p><strong>Hopitaux</strong>';
    echo '</div>';
    echo '</div>';
} else {
    // Gérer les erreurs de requête
    echo "Erreur lors de l'exécution de la requête : " . $connexion->error;
}

// Fermer la connexion à la base de données
$connexion->close();
?>

          <div class="col-lg-3 col-md-6 d-md-flex align-items-md-stretch">

          <?php

include 'hopital/connexion.php';

// Exécuter la requête SQL
$sql = "SELECT SUM(quantity) AS total_quantity FROM blood_stock";
$result = $connexion->query($sql);

// Vérifier si la requête a réussi
if ($result) {
    // Récupérer le résultat de la requête
    $row = $result->fetch_assoc();
    $totalQuantity = $row['total_quantity'];

    // Afficher la valeur de la somme des quantités

echo '<div class="count-box">';
echo '<i class="fas fa-tint"></i>';
echo '<span data-purecounter-start="0" data-purecounter-end="'. $totalQuantity .'" data-purecounter-duration="1" class="purecounter"></span>';
echo '';
echo '<p><strong>Sangs</strong>';
echo '</div>';
echo '</div>';


    
} else {
    // Gérer les erreurs de requête
    echo "Erreur lors de l'exécution de la requête : " . $connexion->error;
}

// Fermer la connexion à la base de données
$connexion->close();
?>


          <div class="col-lg-3 col-md-6 d-md-flex align-items-md-stretch">
            <div class="count-box">
              <i class="fas fa-award"></i>
              <span data-purecounter-start="0" data-purecounter-end="15" data-purecounter-duration="1" class="purecounter"></span>
              <p><strong>Primes</strong>
            </div>
          </div>

        </div>

      </div>
    </section><!-- End Counts Section -->

    <!-- ======= Doctors Section ======= -->
    <section id="hospital" class="doctors section-bg">
      <div class="container" data-aos="fade-up">



        <?php
        // Assurez-vous de configurer ces informations en fonction de votre serveur MySQL

        include 'hopital/connexion.php';
        // Se connecter à la base de données
        $connexion = new mysqli($host, $utilisateur, $mot_de_passe, $base_de_donnees);

        // Vérifier la connexion
        if ($connexion->connect_error) {
          die("Échec de la connexion à la base de données : " . $connexion->connect_error);
        }

        $queryHopitaux = "SELECT id, hopitalname, hopitaladress, image FROM hopital";
        $resultHopitaux = mysqli_query($connexion, $queryHopitaux);

        if (!$resultHopitaux) {
          die("Erreur dans la requête SQL: " . mysqli_error($connexion));
        }

        ?>
        <div id="layoutSidenav_content">
          <main style="margin-top: 100px;">

            <!--liste des hopitaux à recuprérer et a afficheer-->
            <section id="doctors" class="doctors section-bg">
              <div class="container" data-aos="fade-up">
                <div class="section-title">
                  <h2>Hopitaux</h2>
                </div>
                <div class="row">
                  <?php
                  $i = 0;
                  while ($row = mysqli_fetch_assoc($resultHopitaux)) {
                    $hopitalId = $row['id'];
                    $hopitalName = $row['hopitalname'];
                    $hopitalImage = $row['image'];
                    $hopitalAdress = $row['hopitaladress'];
                    $i++;
                  ?>
                    <div class="col-lg-3 col-md-6 d-flex align-items-stretch">
                      <div class="member" data-aos="fade-up" data-aos-delay="100">
                        <div class="member-img">
                          <img src="hopital/gestion_hopital/<?php echo $hopitalImage; ?>" alt="Image de l'hôpital" class="img-fluid">

                            <div class="social">
                            <a href="https://wwww.twitter.com"><i class="bi bi-twitter"></i></a>
                            <a href="https://www.facebook.com"><i class="bi bi-facebook"></i></a>
                            <a href="https://www.instagram.com"><i class="bi bi-instagram"></i></a>
                            <a href="https://www.linkedin.com"><i class="bi bi-linkedin"></i></a>
                            </div>
                          </div>
                        <div class="member-info">
                          <h4><?php echo $hopitalName; ?></h4>
                          <h4><?php echo $hopitalAdress; ?></h4>
                        </div>
                      </div>
                    </div>
                  <?php
                  if ($i == 4){
                    break;
                  }
                  } ?>
                </div>
              </div>
            </section>
        </div>
  </main>
  </div>
  </section><!-- End Doctors Section -->

  <!-- ======= Testimonials Section ======= -->
  <section id="temoignages" class="testimonials">
    <div class="container" data-aos="fade-up">

      <div class="section-title">
        <h2>Temoignages</h2>
      </div>

      <div class="testimonials-slider swiper" data-aos="fade-up" data-aos-delay="100">
        <div class="swiper-wrapper">



        <?php
          include 'hopital/connexion.php'; // Inclure le fichier de connexion à la base de données

          // Requête SQL pour récupérer les témoignages
          $sql = "SELECT * FROM temoignage";
          $result = $connexion->query($sql);

          // Vérifier si des témoignages existent
          if ($result->num_rows > 0) {
              // Parcourir les résultats et afficher les données
              while ($row = $result->fetch_assoc()) {
                  $name = $row['name'];
                  $profession = $row['profession'];
                  $temoignage = $row['temoignage'];
                  $image = $row['image'];

                  // Afficher les données



                  echo '<div class="swiper-slide">';
                  echo '<div class="testimonial-item">';
                  echo '<p>';
                  echo '<i class="bx bxs-quote-alt-left quote-icon-left"></i>';
                  echo $temoignage;
                  echo '<i class="bx bxs-quote-alt-right quote-icon-right"></i>';
                  echo '</p>';
                  echo '<img src="hf/image/' . $image . '" alt="Image du témoignage" class="testimonial-img" >';
                  echo '<h3>' . $name . '</h3>';
                  echo '<h4>' . $profession . '</h4>';
                  echo '</div>';
                  echo '</div><!-- End testimonial item -->';
              }
          } else {
              echo "Aucun témoignage trouvé.";
          }

          // Fermer la connexion à la base de données
          $connexion->close();
        ?>
        </div>
        <div class="swiper-pagination"></div>
      </div>

    </div>
  </section><!-- End Testimonials Section -->



  <?php
  if ((isset($_SESSION["utilisateur_connectee"]) && $_SESSION["utilisateur_connectee"] === true) || (isset($_SESSION["utilisateur_connecte"]) && $_SESSION["utilisateur_connecte"] === true)) {
    // Si l'utilisateur est connecté, afficher le menu déroulant avec Profil et Déconnexion
  ?>

  <?php
  } else {
  ?>
    <!-- ======= Cta Section ======= -->
    <section id="cta" class="cta">
      <div class="container" data-aos="zoom-in">

        <div class="text-center">
          <h3>En cas d'urgence? Besoin d'aide maintenant?</h3>
          <p>En tant que gardien de la santé et du bien-être, il est déchirant de voir des vies précieuses s'éteindre en raison de cette pénurie. C'est pourquoi je suis extrêmement reconnaissant et prêt à saisir cette opportunité offerte par 'BloodLocator'. En utilisant cette plateforme innovante, je suis déterminé à trouver les donneurs de sang compatibles et à établir des connexions vitales pour mes patients. Ensemble, nous pouvons inverser cette tendance tragique et offrir une lueur d'espoir à ceux qui en ont désespérément besoin. Le pouvoir de sauver des vies est entre nos mains, et je suis prêt à tout mettre en œuvre pour y parvenir.</p>
          <a class="cta-btn scrollto" href="hopital/user/login.php">Commencer des maintenant</a>
        </div>

      </div>
    </section><!-- End Cta Section -->
  <?php
  }
  ?>






  <!-- ======= Gallery Section ======= -->
  <section id="gallery" class="gallery">
    <div class="container" data-aos="fade-up">

      <div class="section-title">
        <h2>Galleries</h2>
      </div>

      <div class="gallery-slider swiper">
        <div class="swiper-wrapper align-items-center">
          <div class="swiper-slide"><a class="gallery-lightbox" href="assets/img/gallery/gallery-1.jpg"><img src="assets/img/gallery/gallery-1.jpg" class="img-fluid" alt=""></a></div>
          <div class="swiper-slide"><a class="gallery-lightbox" href="assets/img/gallery/gallery-2.jpg"><img src="assets/img/gallery/gallery-2.jpg" class="img-fluid" alt=""></a></div>
          <div class="swiper-slide"><a class="gallery-lightbox" href="assets/img/gallery/gallery-3.jpg"><img src="assets/img/gallery/gallery-3.jpg" class="img-fluid" alt=""></a></div>
          <div class="swiper-slide"><a class="gallery-lightbox" href="assets/img/gallery/gallery-4.jpg"><img src="assets/img/gallery/gallery-4.jpg" class="img-fluid" alt=""></a></div>
          <div class="swiper-slide"><a class="gallery-lightbox" href="assets/img/gallery/gallery-5.jpg"><img src="assets/img/gallery/gallery-5.jpg" class="img-fluid" alt=""></a></div>
          <div class="swiper-slide"><a class="gallery-lightbox" href="assets/img/gallery/gallery-6.jpg"><img src="assets/img/gallery/gallery-6.jpg" class="img-fluid" alt=""></a></div>
          <div class="swiper-slide"><a class="gallery-lightbox" href="assets/img/gallery/gallery-7.jpg"><img src="assets/img/gallery/gallery-7.jpg" class="img-fluid" alt=""></a></div>
          <div class="swiper-slide"><a class="gallery-lightbox" href="assets/img/gallery/gallery-8.jpg"><img src="assets/img/gallery/gallery-8.jpg" class="img-fluid" alt=""></a></div>
        </div>
        <div class="swiper-pagination"></div>
      </div>

    </div>
  </section><!-- End Gallery Section -->


  <!-- ======= Contact Section ======= -->
  <section id="contact" class="contact">
    <div class="container">

      <div class="section-title">
        <h2>Contact</h2>
      </div>

    </div>

    <div>
      <?php
      include 'hf/map.php';
      ?>
    </div>
  </section><!-- End Contact Section -->

  </main><!-- End #main -->

  <?php
  include 'hf/contact.php';
  include 'hf/footer.php';
  ?>

  <div id="preloader"></div>
  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>